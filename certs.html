<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Certificate Expiration Dashboard</title>

<style>
  body {
    background: #111;
    color: #eee;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    padding: 20px;
  }
  h1 {
    font-size: 22px;
    margin-bottom: 20px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
  }
  td, th {
    padding: 10px;
    border-bottom: 1px solid #333;
  }
  th {
    text-align: left;
    color: #aaa;
  }
</style>
</head>

<body>

<h1>Certificate Expiration</h1>

<table>
  <tr>
    <th>Site</th>
    <th>Expiration</th>
  </tr>

  <tr>
    <td>mstry9azure.azurewebsites.net</td>
    <td id="azure"></td>
  </tr>

  <tr>
    <td>mstry9google.nightscoutfree.com</td>
    <td id="google"></td>
  </tr>

  <tr>
    <td>mstry9google2.mooo.com</td>
    <td id="mooo"></td>
  </tr>
</table>

<script>
async function checkCert(url, elementId) {
  try {
    const response = await fetch(url, { method: "HEAD" });

    const security =
      response.securityInfo ||
      response.webkitSecurityInfo;

    if (security && security.validUntil) {
      const date = new Date(security.validUntil * 1000);
      document.getElementById(elementId).textContent =
        date.toDateString();
    } else {
      document.getElementById(elementId).textContent =
        "Unable to read";
    }
  } catch (e) {
    document.getElementById(elementId).textContent = "Error";
  }
}

checkCert("https://mstry9azure.azurewebsites.net", "azure");
checkCert("https://mstry9google.nightscoutfree.com", "google");
checkCert("https://mstry9google2.mooo.com", "mooo");
</script>

</body>
</html>
